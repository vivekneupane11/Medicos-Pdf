{"version":3,"file":"static/js/1052.b6c46056.chunk.js","mappings":"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","sources":["pages/Profile/components/followersAndFollowing/index.js"],"sourcesContent":["// import firebase from 'firebase/compat'\nimport React, { useEffect, useState,useRef, useContext } from 'react'\n// import { HiDotsHorizontal } from 'react-icons/hi'\nimport { Link } from 'react-router-dom'\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\n\nimport { DisplayTitle } from '../../../../components/global/Titles'\nimport './_followersAndFollowing.scss'\n// import { deleteDoc, doc, getFirestore, onSnapshot, setDoc } from 'firebase/firestore';\nimport { AuthContext } from '../../../../components/signUp/authMethods/authentication';\n\nconst FollowersAndFollowing = ({data}) => {\n    const [toggleFollow, setToggleFollow] = useState(false);\n    const { user,username } = useContext(AuthContext);\n    const [allData,setAllData]=useState()\n    // const [showOption,setShowOption]=useState(false)\n    const [showOptionIcon,setShowOptionIcon]=useState(true)\n    // const [index,setIndex]=useState(null)\n    const [disabled,setDisabled]=useState(false)\n    \n    const ref = useRef()\n    // const db = getFirestore();\n    const getFirebaseAll=()=>{\n        return Promise.all([\n            import('../../../../firebase/firestore')\n        ])\n        .then(([firestore])=>{\n            return {firestore}\n        })\n    };\n\n    useEffect(async() => {\n        let isMounted=true\n\n        if(isMounted && data){\n            try {\n                const {firestore:{db,doc,onSnapshot}}=await getFirebaseAll()\n                //  firebase.firestore()\n                //  .collection('Web-User-Data')\n                //  .doc(data?.username)\n                //  .collection('Additional-Details')\n                //  .doc(data?.username)\n                //  .get()\n                const docRef=doc(db,'Web-User-Data',data?.username,'Additional-Details',data?.username)\n                 onSnapshot(docRef,(res)=>{\n                     if(res.data()){\n                         setAllData(res.data())\n                     }\n                 })\n            } catch (error) {\n                console.log('error fetching data',error)\n                \n            }\n        }\n        return () => {\n            isMounted=false\n        }\n    }, [toggleFollow,data,username])\n\n\n//cheking whether followed or not \n   useEffect(async() => {\n    let isMounted = true;\n    try{\n        const {firestore:{db,doc,onSnapshot}}=await getFirebaseAll()\n\n        if (isMounted && data?.username && username) {\n            // firebase.firestore()\n            //     .collection('Web-User-Data')\n            //     .doc(username)\n            //     .collection('Following')\n            //     .doc(data?.username)\n                const docRef= doc(db,'Web-User-Data',username,'Following',data?.username)\n                onSnapshot(docRef,(querySnapshot) => {\n                    if (querySnapshot.data() ) {\n    \n                        if(querySnapshot.data().username===data?.username){\n                            setToggleFollow(true)\n                        }\n                    }\n                })\n    \n        }\n    }\n    catch(err){\n        console.log('err',err)\n    }\n    return () => {\n        isMounted = false\n    }\n}, [toggleFollow,username,data?.username])\n\n\n    //follow\n const follow=async()=>{\n       setDisabled(true)\n        try {\n        const {firestore:{db,doc,setDoc}}=await getFirebaseAll()\n\n            setToggleFollow(true);\n\n            // firebase.firestore()\n            //     .collection('Web-User-Data')\n            //     .doc(username)\n            //     .collection('Following')\n            //     .doc(data?.username)\n            //     .set({\n            //         username:data?.username\n            //     })\n            setDoc(doc(db,'Web-User-Data',username,'Following',data?.username),\n            {\n                username:data?.username\n            })\n                  \n                // firebase.firestore()\n                //     .collection('Web-User-Data')\n                //     .doc(data?.username)\n                //     .collection('Followers')\n                //     .doc(username)\n                //     .set({\n                //         username:username\n                //     })\n                    setDoc(doc(db,'Web-User-Data',data?.username,'Followers',username),\n                    {\n                        username:username\n                    })\n\n                  \n        } catch (error) {\n            console.log('Error following', error)\n        }\n    }\n\n     //unFollow\n    const unFollow=async()=> {\n        setDisabled(true)\n\n        try {\n        const {firestore:{db,doc,deleteDoc}}=await getFirebaseAll()\n\n            setToggleFollow(false);\n            // firebase.firestore()\n            //     .collection('Web-User-Data')\n            //     .doc(username)\n            //     .collection('Following')\n            //     .doc(data?.username)\n            //     .delete()\n               deleteDoc(doc(db,'Web-User-Data',username,'Following',data?.username))\n\n            // firebase.firestore()\n            // .collection('Web-User-Data')\n            // .doc(data?.username)\n            // .collection('Followers')\n            // .doc(username)\n            // .delete()\n\n            deleteDoc(doc(db,'Web-User-Data',data?.username,'Followers',username))\n\n\n        } catch (error) {\n            console.log('Error unfollowing', error)\n        }\n    }\n\n    useEffect(() => {\n\n        let isMounted=true;\n        if(data?.username===username && isMounted){\n            setShowOptionIcon(false)\n        }\n        return () => {\n            isMounted=false;\n        }\n    }, [data?.username,username])\n\n    // useEffect(() => {\n    //     const checkIfClickedOutside = e => {\n    //         if (showOption && ref.current && !ref.current.contains(e.target)) {\n    //             setShowOption(false)\n    //         }\n    //     }\n\n    //     document.addEventListener(\"mousedown\", checkIfClickedOutside)\n\n    //     return () => {\n    //         document.removeEventListener(\"mousedown\", checkIfClickedOutside)\n    //     }\n    // }, [showOption])\n\nconst handelfollow=()=>follow()\nconst handelunfollow=()=>unFollow()\n\n    return (\n        <div className='followersAndFollowing-container' >\n\n             <div className='followersAndFollowing-container-img'>\n                 {\n                     (allData?.photoURL!==null || allData?.photoURL !== '') ?\n                     <Link\n                     className='links'\n                     to={{\n                         pathname: `${allData?.username? `/profile/${allData?.username}` : '/profile/medicos.int7'}`,\n                     }}>  <LazyLoadImage\n    effect=\"blur\"\n    src={allData?.photoURL} alt={allData?.displayName}\n\n     /> \n     </Link>\n                 \n                     :\n                     <Link\n                     className='avatar-followerFollowing'\n                     to={{\n                         pathname: `${allData?.username? `/profile/${allData?.username}` : '/profile/medicos.int7'}`,\n                     }}>\n                   \n                       <DisplayTitle title={allData?.email?.substring(0, 1)} color='white' type=\"display1\" />\n                     </Link>\n                 }\n                \n             </div>\n             <div className='followersAndFollowing-container-desc'>\n                <Link\n                    className='links'\n                    to={{\n                        pathname: `${allData?.username? `/profile/${allData?.username}` : '/profile/medicos.int7'}`,\n                    }}>\n                   <h6>{allData?.displayName ?\n                      allData?.displayName\n                      :\n                      \"Medicos\"\n                \n                }</h6>\n                 </Link>\n                 <p>{allData?.email}</p>\n           \n               \n             </div>\n             {\n                       showOptionIcon && <>{\n                        !toggleFollow ?\n                        <button onClick={handelfollow}  className='followersAndFollowing-container-option-container-btn'>Follow</button>\n                        :\n                        <button onClick={handelunfollow}  className='followersAndFollowing-container-option-container-btn'>Following</button>\n                       }</>   \n                    }\n\n             {/* <div ref={ref} className='followersAndFollowing-container-option'>\n                 {\n                     showOptionIcon &&  <HiDotsHorizontal className='followersAndFollowing-container-option-icon' onClick={()=>setShowOption(!showOption)} />\n                 }\n               \n                <div className={`followersAndFollowing-container-option-container ${showOption? 'followersAndFollowing-container-option-containerActive':''}`}>\n                    {\n                        !toggleFollow ?\n                        <button onClick={()=>follow()} disabled={disabled} className='followersAndFollowing-container-option-container-btn'>Follow</button>\n                        :\n                        <button onClick={()=>unFollow()} disabled={disabled} className='followersAndFollowing-container-option-container-btn'>Unfollow</button>\n                    }\n                </div>\n             </div> */}\n        </div>\n    )\n}\n\nexport default FollowersAndFollowing\n"],"names":["_ref","_allData$email","data","_useState","useState","_useState2","_slicedToArray","toggleFollow","setToggleFollow","_useContext","useContext","AuthContext","username","user","_useState3","_useState4","allData","setAllData","_useState5","_useState6","showOptionIcon","setShowOptionIcon","_useState7","_useState8","setDisabled","getFirebaseAll","useRef","Promise","all","then","_ref2","firestore","useEffect","_asyncToGenerator","_regeneratorRuntime","_callee","_yield$getFirebaseAll","_yield$getFirebaseAll2","db","doc","onSnapshot","docRef","_context","prev","next","sent","res","t0","console","log","abrupt","stop","_callee2","isMounted","_yield$getFirebaseAll3","_yield$getFirebaseAll4","_context2","querySnapshot","follow","_ref6","_callee3","_yield$getFirebaseAll5","_yield$getFirebaseAll6","setDoc","_context3","apply","arguments","unFollow","_ref7","_callee4","_yield$getFirebaseAll7","_yield$getFirebaseAll8","deleteDoc","_context4","_jsxs","className","children","_jsx","photoURL","Link","to","pathname","concat","LazyLoadImage","effect","src","alt","displayName","DisplayTitle","title","email","substring","color","type","_Fragment","onClick"],"sourceRoot":""}