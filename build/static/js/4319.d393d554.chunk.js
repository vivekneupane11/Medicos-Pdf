"use strict";(self.webpackChunkmedicos_pdf=self.webpackChunkmedicos_pdf||[]).push([[4319],{94319:function(e,n,i){i.r(n),i.d(n,{default:function(){return k}});var a=i(42982),r=i(15861),t=i(70885),s=i(64687),o=i.n(s),l=i(72791),c=i(30577),d=i(97769),u=i(91523),m=i(79271),p=i(29202),v=i(89295),f=i(80184),h=function(){return(0,f.jsx)("div",{className:"clipboardPlaceholder-wrapper",children:(0,f.jsx)(v.Z,{classNames:"placeholder",timeout:3e3,in:!0,appear:!0,children:(0,f.jsx)("div",{className:"image"})})})},x=i(65414),g=i(77237),j=i(88437),b=i(42558),N=i(87087),y=function(e){var n=e.data,i=e.closeModal,a=e.modalIsOpen;return(0,f.jsx)("div",{className:"imagemodal-wrapper",children:a&&(0,f.jsx)(v.Z,{classNames:"tipsTransition",in:a,appear:a,onExited:i,unmountOnExit:!0,timeout:200,children:(0,f.jsxs)("div",{className:"imagemodal-wrapper-container",children:[(0,f.jsxs)("div",{className:"imagemodal-wrapper-container-image",children:[(0,f.jsx)(N.LazyLoadImage,{className:"modal-image",src:null!==n&&void 0!==n&&n.image?null===n||void 0===n?void 0:n.image:b,alt:"img",effect:"blur"}),(0,f.jsx)("div",{className:"close",onClick:function(){return i()},children:(0,f.jsx)(j.Z,{className:"icon"})})]}),(0,f.jsx)("div",{className:"imagemodal-wrapper-container-userdetails",children:(0,f.jsxs)(u.rU,{to:"/profile/".concat(null===n||void 0===n?void 0:n.author),className:"user-info",children:[(0,f.jsx)(d.qE,{Image:null===n||void 0===n?void 0:n.userAvatar,text:null!==n&&void 0!==n&&n.username?null===n||void 0===n?void 0:n.username:"medicos.int7",size:"35px"}),(0,f.jsx)("h6",{children:null!==n&&void 0!==n&&n.username?null===n||void 0===n?void 0:n.username:"medicos.int7"})]})})]})})})},k=function(){var e=(0,m.UO)().userId,n=(0,l.useContext)(x.V),s=(n.user,n.username),v=(0,l.useState)(),j=(0,t.Z)(v,2),b=j[0],k=j[1],w=(0,l.useState)(!1),I=(0,t.Z)(w,2),C=I[0],S=I[1],Z=(0,l.useState)(!1),A=(0,t.Z)(Z,2),E=A[0],D=A[1],U=function(){return Promise.all([i.e(9565).then(i.bind(i,19565))]).then((function(e){return{firestore:(0,t.Z)(e,1)[0]}}))};function L(){return(L=(0,r.Z)(o().mark((function e(n,i){var a,r,t,l,d,u,m,p,v,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U();case 3:a=e.sent,r=a.firestore,t=r.db,l=r.query,d=r.collection,u=r.where,m=r.onSnapshot,p=r.deleteDoc,v=r.doc,f=l(d(t,"Web-User-Data",s,"Clipped-Slide-Images"),u("image","==",n),u("createdAt","==",i)),m(f,(function(e){var n;e.empty||p(v(t,"Web-User-Data",s,"Clipped-Slide-Images",null===e||void 0===e||null===(n=e.docs[0])||void 0===n?void 0:n.id)).then((function(){c.Am.success("Clipped Slide Images deleted successfully.",{theme:"dark",hideProgressBar:!0})}))})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log("Error deleting clipped slide image",e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}var O=function(e){var n=e.data,i=e.index,a=(0,l.useState)(!1),r=(0,t.Z)(a,2),o=r[0],c=r[1];return(0,f.jsxs)("div",{className:"clipped-image-container",children:[(0,f.jsx)(N.LazyLoadImage,{onClick:function(){return c(!0)},className:"image",src:null===n||void 0===n?void 0:n.image,alt:"image"}),(0,f.jsx)(y,{data:n,modalIsOpen:o,closeModal:function(){c(!1)},openModal:function(){c(!0)}}),(0,f.jsxs)("div",{className:"bottom-container",children:[(0,f.jsxs)(u.rU,{to:"/profile/".concat(null!==n&&void 0!==n&&n.author?null===n||void 0===n?void 0:n.author:"medicos.int7"),className:"userInfo",children:[(0,f.jsx)(d.qE,{size:"35px",Image:null===n||void 0===n?void 0:n.userAvatar,text:null===n||void 0===n?void 0:n.author}),(0,f.jsx)("p",{children:null===n||void 0===n?void 0:n.author})]}),s===(null===n||void 0===n?void 0:n.createdBy)&&(0,f.jsx)("div",{onClick:function(){return function(e,n){return L.apply(this,arguments)}(null===n||void 0===n?void 0:n.image,null===n||void 0===n?void 0:n.createdAt)},children:(0,f.jsx)(g.Z,{className:"icon"})})]})]},i)};(0,l.useEffect)((0,r.Z)(o().mark((function n(){var i,a,r,t,s,l,c,d,u;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return!0,n.prev=1,n.next=4,U();case 4:i=n.sent,a=i.firestore,r=a.db,t=a.query,s=a.collection,l=a.orderBy,c=a.limit,d=a.onSnapshot,S(!0),u=t(s(r,"Web-User-Data",e,"Clipped-Slide-Images"),l("createdAt","desc"),c(6)),d(u,(function(e){if(e.empty)S(!1);else{var n,i=[];e.forEach((function(e){i.push(e.data())})),k(i),6===(null===e||void 0===e||null===(n=e.docs)||void 0===n?void 0:n.length)?D(!0):D(!1),S(!1)}})),n.next=20;break;case 17:n.prev=17,n.t0=n.catch(1),console.log("Error fetching clipped slide images",n.t0);case 20:return n.abrupt("return",(function(){!1}));case 21:case"end":return n.stop()}}),n,null,[[1,17]])}))),[6,e]);var q=function(){var n=(0,r.Z)(o().mark((function n(){var i,r,t,s,l,c,d,u,m,p,v;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,U();case 2:r=n.sent,t=r.firestore,s=t.db,l=t.query,c=t.collection,d=t.orderBy,u=t.startAfter,m=t.limit,p=t.getDocs,v=l(c(s,"Web-User-Data",e,"Clipped-Slide-Images"),d("createdAt","desc"),u(null===(i=b[(null===b||void 0===b?void 0:b.length)-1])||void 0===i?void 0:i.createdAt),m(6)),p(v).then((function(e){if(console.log("THIS IS MORE LOADED DATA",e.docs),e.empty)D(!1);else{var n=[];e.forEach((function(e){n.push(e.data())})),k((function(e){return[].concat((0,a.Z)(e),n)})),D(!0)}}));case 13:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,f.jsxs)("div",{className:"clipboard-page-container",children:[C?(0,f.jsx)("div",{className:"clipped-image-list",children:(0,f.jsx)(h,{})}):(0,f.jsx)(f.Fragment,{children:null!==b&&void 0!==b&&b.length?(0,f.jsx)("div",{className:"clipped-image-list",children:null===b||void 0===b?void 0:b.map((function(e,n){return(0,f.jsx)(O,{data:e},n)}))}):(0,f.jsx)("div",{className:"text-container",children:(0,f.jsx)("h3",{children:"No clipped slide images."})})}),E&&(0,f.jsx)("div",{className:"button-container",children:(0,f.jsx)("div",{onClick:q,children:(0,f.jsx)(p.z,{type:"primary-outline-rounded",label:"Load More",labelColor:"black"})})})]})}},42558:function(e,n,i){e.exports=i.p+"static/media/loaderpdf.8d131153f1a3b12f9161.webp"}}]);
//# sourceMappingURL=4319.d393d554.chunk.js.map